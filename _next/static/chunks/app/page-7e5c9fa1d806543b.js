(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1481:(e,t,r)=>{Promise.resolve().then(r.bind(r,8710))},8710:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>S});var n=r(5155),i=r(2115),a=r(539),l=r(4627),o=r(9488),c=r(1574),s=r(7132),d=r(9029),u=r(9518),m=r(9970),h=r(1269),x=r(2454);async function p(e){var t;let r="https://geocoding-api.open-meteo.com/v1/search?name=".concat(encodeURIComponent(e),"&count=5"),n=await fetch(r,{cache:"no-store"});if(!n.ok)throw Error("Failed to search cities. Try again.");let i=await n.json();return(null!=(t=null==i?void 0:i.results)?t:[]).map(e=>({name:e.name,country:e.country,latitude:e.latitude,longitude:e.longitude}))}function j(e){let{onSelect:t}=e,[r,j]=(0,i.useState)(""),[y,A]=(0,i.useState)(""),{data:f,isFetching:_,isError:g,error:v,refetch:b}=(0,x.I)({queryKey:["geocode",y],queryFn:()=>p(y),enabled:y.length>0,staleTime:6e4,retry:1});return(0,n.jsx)(a.A,{sx:{maxWidth:800,m:"24px auto"},children:(0,n.jsxs)(l.A,{children:[(0,n.jsx)(o.A,{variant:"h6",component:"h2",gutterBottom:!0,children:"Pick a City"}),(0,n.jsxs)(c.A,{component:"form",onSubmit:function(e){e.preventDefault();let t=r.trim();t&&A(t)},sx:{display:"flex",gap:1},children:[(0,n.jsx)(s.A,{fullWidth:!0,size:"small",label:"Search city",value:r,onChange:e=>j(e.target.value),InputLabelProps:{shrink:r.length>0},inputProps:{"aria-label":"Search city"}}),(0,n.jsx)(d.A,{type:"submit",variant:"contained",disabled:_,children:_?"Searching...":"Search"})]}),g&&(0,n.jsx)(o.A,{color:"error",sx:{mt:1},children:v.message}),!_&&y&&(!f||0===f.length)&&(0,n.jsx)(o.A,{sx:{mt:1},children:"No results."}),(0,n.jsx)(u.A,{"aria-label":"Search results",children:(null!=f?f:[]).map((e,r)=>{var i;let a="".concat(e.name,"-").concat(null!=(i=e.country)?i:"NA","-").concat(e.latitude,"-").concat(e.longitude,"-").concat(r);return(0,n.jsx)(m.Ay,{disablePadding:!0,children:(0,n.jsxs)(h.A,{onClick:()=>t(e),children:[e.name,e.country?", ".concat(e.country):""," (",e.latitude.toFixed(2),", ",e.longitude.toFixed(2),")"]})},a)})})]})})}var y=r(1292),A=r(4839);async function f(e){let t=new URLSearchParams({latitude:String(e.latitude),longitude:String(e.longitude),current:"temperature_2m,apparent_temperature,wind_speed_10m,relative_humidity_2m,precipitation",timezone:"auto"}),r="https://api.open-meteo.com/v1/forecast?".concat(t.toString()),n=await fetch(r,{cache:"no-store"});if(!n.ok)throw Error("Failed to fetch current weather.");return await n.json()}function _(e){var t;let{place:r}=e,{data:i,isFetching:c,isError:s,error:d}=(0,x.I)({queryKey:["current-weather",null==r?void 0:r.latitude,null==r?void 0:r.longitude],queryFn:()=>f(r),enabled:!!r,staleTime:6e4,retry:1});if(!r)return(0,n.jsx)(a.A,{sx:{maxWidth:800,m:"16px auto"},children:(0,n.jsx)(l.A,{children:(0,n.jsx)(o.A,{children:"Select a city to see current weather."})})});if(c)return(0,n.jsx)(a.A,{sx:{maxWidth:800,m:"16px auto"},children:(0,n.jsx)(l.A,{children:(0,n.jsxs)(o.A,{children:["Loading current weather for ",r.name,"…"]})})});if(s)return(0,n.jsx)(a.A,{sx:{maxWidth:800,m:"16px auto"},children:(0,n.jsx)(l.A,{children:(0,n.jsx)(o.A,{color:"error",children:d.message})})});let u=null==i?void 0:i.current;return(0,n.jsx)(a.A,{sx:{maxWidth:800,m:"16px auto"},children:(0,n.jsxs)(l.A,{children:[(0,n.jsxs)(o.A,{variant:"h6",gutterBottom:!0,children:["Current Weather — ",r.name,r.country?", ".concat(r.country):""]}),u?(0,n.jsxs)(y.A,{spacing:1,divider:(0,n.jsx)(A.A,{flexItem:!0}),children:[(0,n.jsxs)(o.A,{children:["Observed at: ",u.time," ",(null==i?void 0:i.timezone)?"(".concat(i.timezone,")"):""]}),(0,n.jsxs)(o.A,{children:["Temperature: ",null!=(t=u.temperature_2m)?t:"—"," \xb0C",null!=u.apparent_temperature?" (feels like ".concat(u.apparent_temperature," \xb0C)"):""]}),(0,n.jsxs)(o.A,{children:["Humidity: ",null!=u.relative_humidity_2m?"".concat(u.relative_humidity_2m,"%"):"—"]}),(0,n.jsxs)(o.A,{children:["Wind: ",null!=u.wind_speed_10m?"".concat(u.wind_speed_10m," m/s"):"—"]}),(0,n.jsxs)(o.A,{children:["Precipitation: ",null!=u.precipitation?"".concat(u.precipitation," mm"):"—"]})]}):(0,n.jsx)(o.A,{children:"No current data available."})]})})}var g=r(5970),v=r(4193);async function b(e){let t=new URLSearchParams({latitude:String(e.latitude),longitude:String(e.longitude),daily:"temperature_2m_max,temperature_2m_min,precipitation_sum,precipitation_probability_max,wind_speed_10m_max",timezone:"auto",forecast_days:"7"}),r="https://api.open-meteo.com/v1/forecast?".concat(t.toString()),n=await fetch(r,{cache:"no-store"});if(!n.ok)throw Error("Failed to fetch weekly forecast.");return await n.json()}function w(e){var t,r;let{place:i}=e,{data:s,isFetching:d,isError:u,error:m}=(0,x.I)({queryKey:["weekly-forecast",null==i?void 0:i.latitude,null==i?void 0:i.longitude],queryFn:()=>b(i),enabled:!!i,staleTime:6e4,retry:1});if(!i)return(0,n.jsx)(a.A,{sx:{maxWidth:800,m:"16px auto"},children:(0,n.jsx)(l.A,{children:(0,n.jsx)(o.A,{children:"Select a city to see the 7-day forecast."})})});if(d)return(0,n.jsx)(a.A,{sx:{maxWidth:800,m:"16px auto"},children:(0,n.jsx)(l.A,{children:(0,n.jsxs)(o.A,{children:["Loading 7-day forecast for ",i.name,"…"]})})});if(u)return(0,n.jsx)(a.A,{sx:{maxWidth:800,m:"16px auto"},children:(0,n.jsx)(l.A,{children:(0,n.jsx)(o.A,{color:"error",children:m.message})})});let h=null==s?void 0:s.daily,p=null!=(r=null==h||null==(t=h.time)?void 0:t.length)?r:0;return(0,n.jsx)(a.A,{sx:{maxWidth:800,m:"16px auto"},children:(0,n.jsxs)(l.A,{children:[(0,n.jsxs)(o.A,{variant:"h6",gutterBottom:!0,children:["7-Day Forecast — ",i.name,i.country?", ".concat(i.country):""]}),h&&0!==p?(0,n.jsx)(c.A,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr",md:"1fr 1fr 1fr"},gap:2,mt:1},children:h.time.map((e,t)=>{var r,i,a,l,c,s,d,u,m;return(0,n.jsxs)(g.A,{elevation:2,sx:{p:2,height:"100%"},children:[(0,n.jsx)(o.A,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:new Date(e).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),(0,n.jsxs)(o.A,{color:"error.main",children:["High: ",null!=(s=null==(r=h.temperature_2m_max)?void 0:r[t])?s:"—","\xb0C"]}),(0,n.jsxs)(o.A,{color:"primary.main",children:["Low: ",null!=(d=null==(i=h.temperature_2m_min)?void 0:i[t])?d:"—","\xb0C"]}),(0,n.jsxs)(o.A,{variant:"body2",sx:{mb:.5},children:["Precipitation: ",null!=(u=null==(a=h.precipitation_sum)?void 0:a[t])?u:0," mm"]}),(null==(l=h.precipitation_probability_max)?void 0:l[t])!=null&&(0,n.jsx)(v.A,{label:"".concat(h.precipitation_probability_max[t],"% chance"),size:"small",color:h.precipitation_probability_max[t]>50?"warning":"default",sx:{mb:.5}}),(0,n.jsxs)(o.A,{variant:"body2",children:["Max Wind: ",null!=(m=null==(c=h.wind_speed_10m_max)?void 0:c[t])?m:"—"," m/s"]})]},e)})}):(0,n.jsx)(o.A,{children:"No forecast data available."})]})})}function S(){let[e,t]=(0,i.useState)(void 0);return(0,n.jsxs)("div",{children:[(0,n.jsx)(j,{onSelect:t}),(0,n.jsx)(_,{place:e}),(0,n.jsx)(w,{place:e})]})}}},e=>{e.O(0,[743,733,441,255,358],()=>e(e.s=1481)),_N_E=e.O()}]);