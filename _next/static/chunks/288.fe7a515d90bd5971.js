"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[288],{8288:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var a=n(5155),c=n(2115),l=n(539),r=n(4627),i=n(9488),o=n(7722),s=n(9029),u=n(9518),d=n(9970),h=n(1269),m=n(2454);async function x(e){var t;let n="https://geocoding-api.open-meteo.com/v1/search?name=".concat(encodeURIComponent(e),"&count=5"),a=await fetch(n,{cache:"no-store"});if(!a.ok)throw Error("Failed to search cities. Try again.");let c=await a.json();return(null!=(t=null==c?void 0:c.results)?t:[]).map(e=>({name:e.name,country:e.country,latitude:e.latitude,longitude:e.longitude}))}function y(e){let{onSelect:t}=e,[n,y]=(0,c.useState)(""),[g,p]=(0,c.useState)(""),{data:j,isFetching:A,isError:v,error:f,refetch:k}=(0,m.I)({queryKey:["geocode",g],queryFn:()=>x(g),enabled:g.length>0,staleTime:6e4,retry:1});function b(){let e=n.trim();e&&p(e)}return(0,a.jsx)(l.A,{sx:{maxWidth:800,m:"24px auto"},children:(0,a.jsxs)(r.A,{children:[(0,a.jsx)(i.A,{variant:"h6",component:"h2",gutterBottom:!0,children:"Pick a City"}),(0,a.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,a.jsx)(o.A,{size:"small",label:"Search city",value:n,onChange:e=>y(e.target.value),onKeyDown:e=>"Enter"===e.key&&b(),inputProps:{"aria-label":"Search city"}}),(0,a.jsx)(s.A,{variant:"contained",onClick:b,disabled:A,children:A?"Searching...":"Search"})]}),v&&(0,a.jsx)(i.A,{color:"error",sx:{mt:1},children:f.message}),!A&&g&&(!j||0===j.length)&&(0,a.jsx)(i.A,{sx:{mt:1},children:"No results."}),(0,a.jsx)(u.A,{"aria-label":"Search results",children:(null!=j?j:[]).map((e,n)=>{var c;let l="".concat(e.name,"-").concat(null!=(c=e.country)?c:"NA","-").concat(e.latitude,"-").concat(e.longitude,"-").concat(n);return(0,a.jsx)(d.Ay,{disablePadding:!0,children:(0,a.jsxs)(h.A,{onClick:()=>t(e),children:[e.name,e.country?", ".concat(e.country):""," (",e.latitude.toFixed(2),", ",e.longitude.toFixed(2),")"]})},l)})})]})})}}}]);