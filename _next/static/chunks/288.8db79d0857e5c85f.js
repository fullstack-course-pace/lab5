"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[288],{8288:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var a=n(5155),l=n(2115),r=n(539),c=n(4627),i=n(9488),o=n(1574),s=n(7722),u=n(9029),d=n(9518),h=n(9970),m=n(1269),p=n(2454);async function x(e){var t;let n="https://geocoding-api.open-meteo.com/v1/search?name=".concat(encodeURIComponent(e),"&count=5"),a=await fetch(n,{cache:"no-store"});if(!a.ok)throw Error("Failed to search cities. Try again.");let l=await a.json();return(null!=(t=null==l?void 0:l.results)?t:[]).map(e=>({name:e.name,country:e.country,latitude:e.latitude,longitude:e.longitude}))}function g(e){let{onSelect:t}=e,[n,g]=(0,l.useState)(""),[y,f]=(0,l.useState)(""),{data:j,isFetching:A,isError:b,error:v,refetch:k}=(0,p.I)({queryKey:["geocode",y],queryFn:()=>x(y),enabled:y.length>0,staleTime:6e4,retry:1});return(0,a.jsx)(r.A,{sx:{maxWidth:800,m:"24px auto"},children:(0,a.jsxs)(c.A,{children:[(0,a.jsx)(i.A,{variant:"h6",component:"h2",gutterBottom:!0,children:"Pick a City"}),(0,a.jsxs)(o.A,{component:"form",onSubmit:function(e){e.preventDefault();let t=n.trim();t&&f(t)},sx:{display:"flex",gap:1},children:[(0,a.jsx)(s.A,{fullWidth:!0,size:"small",label:"Search city",value:n,onChange:e=>g(e.target.value),InputLabelProps:{shrink:n.length>0},inputProps:{"aria-label":"Search city"}}),(0,a.jsx)(u.A,{type:"submit",variant:"contained",disabled:A,children:A?"Searching...":"Search"})]}),b&&(0,a.jsx)(i.A,{color:"error",sx:{mt:1},children:v.message}),!A&&y&&(!j||0===j.length)&&(0,a.jsx)(i.A,{sx:{mt:1},children:"No results."}),(0,a.jsx)(d.A,{"aria-label":"Search results",children:(null!=j?j:[]).map((e,n)=>{var l;let r="".concat(e.name,"-").concat(null!=(l=e.country)?l:"NA","-").concat(e.latitude,"-").concat(e.longitude,"-").concat(n);return(0,a.jsx)(h.Ay,{disablePadding:!0,children:(0,a.jsxs)(m.A,{onClick:()=>t(e),children:[e.name,e.country?", ".concat(e.country):""," (",e.latitude.toFixed(2),", ",e.longitude.toFixed(2),")"]})},r)})})]})})}}}]);